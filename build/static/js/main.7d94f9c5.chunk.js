(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(33)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(8),c=n.n(r),o=n(1);n(16);var s=function(e){var t="",n=Function;return e.activeReturn&&(n=e.action,t=i.a.createElement("div",{className:"Header_return",onClick:function(){return n()}},i.a.createElement("i",{className:"fas fa-arrow-left"}))),e.action&&(n=e.action),i.a.createElement("section",{className:"Header"},t,i.a.createElement("h2",{className:"Header_title"},e.title))},u=n(3),l=n(4),m=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"create",value:function(){return new Promise((function(e,t){var n=window.indexedDB.open("ShinobiWorld",2);n.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("shinobis")||t.createObjectStore("shinobis",{keyPath:"id"})},n.onsuccess=function(t){var n=t.target.result;e(n)}}))}}]),e}(),h=function(){function e(t){Object(u.a)(this,e),this.db=t,this.devMode=!1}return Object(l.a)(e,[{key:"add",value:function(e){var t=this,n=new d({_name:e});return new Promise((function(e,a){var i=t.db.transaction(["shinobis"],"readwrite").objectStore("shinobis").add(n);i.oncomplete=function(t){e("shinobi registrado com sucesso")},i.onerror=function(e){a("erro ao registrar o shinobi")}}))}},{key:"put",value:function(e,t){var n=this;return new Promise((function(a,i){var r=n.db.transaction(["shinobis"],"readwrite").objectStore("shinobis").put(e);r.onsuccess=function(e){a(n.devMode?"put ok":t.ui?"Salvo":"")},r.onerror=function(e){i(n.devMode?"put ERROR":null)}}))}},{key:"get",value:function(e){var t=this;return new Promise((function(n,a){var i=t.db.transaction(["shinobis"],"readwrite").objectStore("shinobis").get(e);i.onsuccess=function(e){var t=new d(i.result);n(t)}}))}},{key:"load",value:function(){var e=this;return new Promise((function(t,n){var a=[],i=e.db.transaction(["shinobis"],"readonly").objectStore("shinobis").openCursor();i.onsuccess=function(n){var i=n.target.result;i?(a.push(i.value),i.continue()):(e.devMode&&console.log(a),t(a))},i.onerror=function(e){n("erro ao carregar dados")}}))}},{key:"del",value:function(e){var t=this;return new Promise((function(n,a){var i=t.db.transaction(["shinobis"],"readwrite").objectStore("shinobis").delete(e);i.onsuccess=function(e){n(t.load())},i.onerror=function(e){a("N\xe3o foi possivel apagar o registro")}}))}}],[{key:"example",value:function(){return new d({_name:"Tanzan",_cla:"Haruno"})}},{key:"new",value:function(e){return new d({_name:e})}}]),e}(),d=function(){function e(t){Object(u.a)(this,e),void 0===t._attr&&(t._attr={}),this._name=t._name||" ",this._cla=t._cla||" ",this._position=t._position||" ",this._title=t._title,this._bio=t._bio||"",this._attr={FOR:t._attr.FOR||5,RES:t._attr.RES||5,AGL:t._attr.AGL||5,DEX:t._attr.DEX||5,PER:t._attr.PER||5,INT:t._attr.INT||5,CAR:t._attr.CAR||5,FOC:t._attr.FOC||5},this._maxHP=void 0,this._actHP=void 0,this._maxCK=void 0,this._actCK=void 0,this._ckType=[],this.id=t.id||Date.now(),this.init()}return Object(l.a)(e,[{key:"fullName",value:function(){return"".concat(this._name," ").concat(this._cla)}},{key:"rank",value:function(){return this._attr.FOR+this._attr.FOR+this._attr.RES+this._attr.AGL+this._attr.DEX+this._attr.INT+this._attr.PER+this._attr.CAR+this._attr.FOC}},{key:"updateMaxHP",value:function(){this._maxHP=Math.round(10*this.RES+5*this.FOR)}},{key:"updateMaxCK",value:function(){this._maxCK=Math.round(5*this._INT+this.PER)}},{key:"init",value:function(){this.updateMaxCK(),this.updateMaxHP()}}]),e}(),f=h,b=new(function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"add",value:function(e){return m.create().then((function(e){return new f(e)})).then((function(t){return t.add(e)})).then((function(e){return console.log(e)}))}},{key:"load",value:function(){return m.create().then((function(e){return new f(e)})).then((function(e){return e.load()}))}},{key:"get",value:function(e){return m.create().then((function(e){return new f(e)})).then((function(t){return t.get(e)}))}},{key:"del",value:function(e){return m.create().then((function(e){return new f(e)})).then((function(t){return t.del(e)}))}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return m.create().then((function(e){return new f(e)})).then((function(n){return n.put(e,t)}))}},{key:"uiMessenger",value:function(e){if(""!==e){var t=document.getElementById("ui-msg"),n=document.createElement("div");n.innerText=e,t.innerHTML="",t.appendChild(n)}}}]),e}());n(17);var v=function(e){var t=e.style?e.style:{},n=e.action?e.action:function(){};return i.a.createElement("div",{className:"FixedButton",onClick:function(){n()},style:t},e.children)};n(18);var E=function(e){var t=e.shinobi;return i.a.createElement("article",{className:"CharacterCard"},i.a.createElement("div",null,i.a.createElement("h3",{className:"CharacterCard_name"},t._name),i.a.createElement("i",{className:"fas fa-trash"})),i.a.createElement("p",{className:"CharacterCard_summary"},t._bio))};n(19);var _=function(e){return i.a.createElement("div",{className:"TextInput"},i.a.createElement("label",{htmlFor:"ipt-name"},e.title),i.a.createElement("input",{id:"ipt-name",type:"text",onChange:function(t){e.text(t.target.value)}}))};n(20);var p=function(e){var t=e.styleMode?"dark":"light",n=e.action?e.action:function(){};return i.a.createElement("button",{className:"Button "+t,onClick:function(e){e.preventDefault(),e.stopPropagation(),n()}},e.title)};n(21);var O=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1];return i.a.createElement("section",{className:"ModalAdd",onClick:function(t){"ModalAdd"===t.target.className&&e.close()}},i.a.createElement("form",{className:"ModalAdd_modal"},i.a.createElement(_,{title:"Primeiro Nome",text:c}),i.a.createElement(p,{title:"Criar",styleMode:"dark",action:function(){e.addShinobi(r),e.close()}})))};var g=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)(!1),l=Object(o.a)(u,2),m=l[0],h=l[1];function d(){h(!m)}return Object(a.useEffect)((function(){b.load().then((function(e){JSON.stringify(r)!==JSON.stringify(e)&&c(e)}))})),i.a.createElement("div",{className:"CharacterList"},i.a.createElement(s,{title:"Personagens"}),i.a.createElement("ul",{className:"CharacterList_list"},r.map((function(t,n){return i.a.createElement("li",{onClick:function(n){n.target.classList.contains("fas")?b.del(t.id).then((function(e){return c(e)})):e.goToShinobiProfile(t.id)},key:n},i.a.createElement(E,{shinobi:t}))})),m&&i.a.createElement(O,{addShinobi:e.addShinobi,close:d})),i.a.createElement(v,{action:d},i.a.createElement("i",{className:"fas fa-plus"})))},S=s,j=n(2);n(22);var k=function(e){var t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],c=n[1],s={width:r},u=e.setData?e.setData:function(){};return Object(a.useEffect)((function(){c(document.querySelector("label[for=".concat(e.id,"]")).offsetWidth)}),[r,e.id]),i.a.createElement("div",{className:"TextArea"},i.a.createElement("div",{className:"TextArea_background",style:s}),i.a.createElement("label",{htmlFor:e.id},e.title),i.a.createElement("textarea",{defaultValue:e.data[e.name],id:e.id,type:"text",placeholder:e.placeholder,rows:e.rows,onBlur:function(e){u(e)}}))};n(23);var y=function(e){var t=e.title?i.a.createElement("h3",{className:"SectionBox_title"},e.title):"";return i.a.createElement("section",{className:"SectionBox"},t,e.children)};n(24);var N=function(e){var t=e.shinobi;return i.a.createElement("section",{className:"General"},i.a.createElement(y,null,i.a.createElement(k,{title:"Nome",id:"General_ipt-name",rows:"1",data:t,name:"_name",setData:function(n){var a=t._name;a=n.target.value,e.setShinobi(Object(j.a)(Object(j.a)({},t),{},{_name:a}))}}),i.a.createElement(k,{title:"Apelido/titulo",id:"General_ipt-title",placeholder:"Relampago de Konoha",rows:"1",data:t,name:"_title",setData:function(t){var n=e.shinobi._title;n=t.target.value,e.setShinobi(Object(j.a)(Object(j.a)({},e.shinobi),{},{_title:n}))}})),i.a.createElement(y,null,i.a.createElement(k,{title:"Cl\xe3",id:"General_ipt-cla",data:t,name:"_cla",setData:function(t){var n=e.shinobi._cla;n=t.target.value,e.setShinobi(Object(j.a)(Object(j.a)({},e.shinobi),{},{_cla:n}))},rows:"1"})),i.a.createElement(y,{className:"card"},i.a.createElement(k,{title:"Descri\xe7\xe3o",id:"General_ipt-bio",rows:"5",data:t,name:"_bio",setData:function(t){var n=e.shinobi._bio;n=t.target.value,e.setShinobi(Object(j.a)(Object(j.a)({},e.shinobi),{},{_bio:n}))}})))},C=n(10),w=n(9),x=n.n(w);n(27);var R=function(e){return Object(a.useEffect)((function(){var t=document.querySelector("#chart");t.onclick=function(){b.uiMessenger(function(){var t=Object.values(e.shinobi._attr).reduce((function(e,t){return e+t}),0);return"Poder: ".concat(t)}())};new x.a(t,{type:"radar",data:{labels:Object.keys(e.shinobi._attr),datasets:[{label:"Sasaki",data:Object.values(e.shinobi._attr)}]},options:{scale:{ticks:{beginAtZero:!0,callback:function(){return""},backdropColor:"rgba(0, 0, 0, 0)",max:5+Math.max.apply(Math,Object(C.a)(Object.values(e.shinobi._attr)))}},legend:{display:!1},responsive:!0,maintainAspectRatio:!1,aspectRatio:1}})})),i.a.createElement("section",{className:"AttrRadar"},i.a.createElement("div",{className:"chart-container"},i.a.createElement("canvas",{onClick:console.log("pah"),id:"chart"})))};n(28);var P=function(e){function t(t,n){var a=e.shinobi._attr;a[t]+=5*n,e.setShinobi(Object(j.a)(Object(j.a)({},e.shinobi),{},{_attr:a}))}return i.a.createElement("section",{className:"AttrTable"},Object.keys(e.shinobi._attr).map((function(n,a){return i.a.createElement("div",{className:"AttrTable_attr",key:a},i.a.createElement("span",null,n,": ",e.shinobi._attr[n]),i.a.createElement("span",{className:"AttrTable_attr_box-button"},i.a.createElement("button",{onClick:function(){return t(n,-1)}},"-"),i.a.createElement("button",{onClick:function(){return t(n,1)}},"+")))})))};n(29);var M=function(e){return i.a.createElement("section",{className:"Status"},i.a.createElement("div",{className:"Status_attr"},i.a.createElement(y,null,i.a.createElement(P,{shinobi:e.shinobi,setShinobi:e.setShinobi})),i.a.createElement(y,null,i.a.createElement(R,{shinobi:e.shinobi}))))};n(30);var T=function(e){return i.a.createElement("nav",{className:"Nav"},i.a.createElement("ul",null,e.pages.map((function(t,n){return i.a.createElement("li",{key:n,onClick:function(){e.setter(n)}},t)}))))};n(31);var A=function(e){var t=Object(a.useState)(0),n=Object(o.a)(t,2),r=n[0],c=n[1];Object(a.useEffect)((function(){b.put(e.shinobi,{ui:!0}).then((function(e){b.uiMessenger(e)})).catch((function(e){console.log(e)}))}),[e.shinobi]);var s=[i.a.createElement(N,{shinobi:e.shinobi,setShinobi:e.setShinobi}),i.a.createElement(M,{shinobi:e.shinobi,setShinobi:e.setShinobi})];return i.a.createElement("div",{className:"ShinobiProfile"},i.a.createElement(S,{title:e.shinobi._name+" "+e.shinobi._cla,activeReturn:"true",action:e.goToCharacterList}),s[r],i.a.createElement(T,{pages:["General","Status","Techniques","Inventory"],setter:c}))};n(32);function D(){var e=Object(a.useState)({}),t=Object(o.a)(e,2),n=t[0],r=t[1];var c=[i.a.createElement(g,{goToShinobiProfile:function(e){b.get(e,{ui:!1}).then((function(e){r(e),m(1)}))},addShinobi:b.add.bind(b)}),i.a.createElement(A,{shinobi:n,setShinobi:r,goToCharacterList:function(){m(0)}})],s=Object(a.useState)(0),u=Object(o.a)(s,2),l=u[0],m=u[1];return i.a.createElement(i.a.Fragment,null,c[l],i.a.createElement("div",{id:"ui-msg"}))}var F=document.getElementById("root");c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(D,null)),F)}],[[11,1,2]]]);
//# sourceMappingURL=main.7d94f9c5.chunk.js.map